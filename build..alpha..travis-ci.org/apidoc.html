<div class="apidocDiv">
<style>
/*csslint
*/
.apidocDiv {
    background: #fff;
    font-family: Arial, Helvetica, sans-serif;
}
.apidocDiv a[href] {
    color: #33f;
    font-weight: bold;
    text-decoration: none;
}
.apidocDiv a[href]:hover {
    text-decoration: underline;
}
.apidocCodeCommentSpan {
    background: #bbf;
    color: #000;
    display: block;
}
.apidocCodeKeywordSpan {
    color: #d00;
    font-weight: bold;
}
.apidocCodePre {
    background: #eef;
    border: 1px solid;
    color: #777;
    padding: 5px;
    white-space: pre-wrap;
}
.apidocFooterDiv {
    margin-top: 20px;
    text-align: center;
}
.apidocModuleLi {
    margin-top: 10px;
}
.apidocSectionDiv {
    border-top: 1px solid;
    margin-top: 20px;
}
.apidocSignatureSpan {
    color: #777;
    font-weight: bold;
}
</style>
<h1>api documentation for
    <a

        href="https://github.com/carlos8f/buffet"

    >buffet (v1.0.10)</a>
</h1>
<h4>Static file server with in-memory cache</h4>
<div class="apidocSectionDiv"><a
    href="#apidoc.tableOfContents"
    id="apidoc.tableOfContents"
><h1>table of contents</h1></a><ol>

    <li class="apidocModuleLi"><a href="#apidoc.module.buffet">module buffet</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.buffet.Buffet">
            function <span class="apidocSignatureSpan">buffet.</span>Buffet
            <span class="apidocSignatureSpan">(specs, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.buffet.Buffet.super_">
            function <span class="apidocSignatureSpan">buffet.</span>Buffet.super_
            <span class="apidocSignatureSpan">(specs, options)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan"></span>buffet</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">buffet.</span>Buffet.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">buffet.</span>Buffet.super_.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">buffet.</span>buffet_server</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">buffet.</span>ecstatic</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">buffet.</span>nginx</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">buffet.</span>node_static</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">buffet.</span>paperboy</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">buffet.</span>send</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">buffet.</span>st</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">buffet.</span>varnish</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.buffet.Buffet">module buffet.Buffet</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.buffet.Buffet.Buffet">
            function <span class="apidocSignatureSpan">buffet.</span>Buffet
            <span class="apidocSignatureSpan">(specs, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.buffet.Buffet.super_">
            function <span class="apidocSignatureSpan">buffet.Buffet.</span>super_
            <span class="apidocSignatureSpan">(specs, options)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.buffet.Buffet.prototype">module buffet.Buffet.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.buffet.Buffet.prototype.middleware">
            function <span class="apidocSignatureSpan">buffet.Buffet.prototype.</span>middleware
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.buffet.Buffet.super_">module buffet.Buffet.super_</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.buffet.Buffet.super_.super_">
            function <span class="apidocSignatureSpan">buffet.Buffet.</span>super_
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.buffet.Buffet.super_.prototype">module buffet.Buffet.super_.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.buffet.Buffet.super_.prototype.close">
            function <span class="apidocSignatureSpan">buffet.Buffet.super_.prototype.</span>close
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.buffet.Buffet.super_.prototype.compile">
            function <span class="apidocSignatureSpan">buffet.Buffet.super_.prototype.</span>compile
            <span class="apidocSignatureSpan">(file)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.buffet.Buffet.super_.prototype.files">
            function <span class="apidocSignatureSpan">buffet.Buffet.super_.prototype.</span>files
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.buffet.Buffet.super_.prototype.get">
            function <span class="apidocSignatureSpan">buffet.Buffet.super_.prototype.</span>get
            <span class="apidocSignatureSpan">(key, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.buffet.Buffet.super_.prototype.getPlugin">
            function <span class="apidocSignatureSpan">buffet.Buffet.super_.prototype.</span>getPlugin
            <span class="apidocSignatureSpan">(p, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.buffet.Buffet.super_.prototype.makePluginPath">
            function <span class="apidocSignatureSpan">buffet.Buffet.super_.prototype.</span>makePluginPath
            <span class="apidocSignatureSpan">(file)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.buffet.buffet">module buffet.buffet</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.buffet.buffet.middleware">
            function <span class="apidocSignatureSpan">buffet.buffet.</span>middleware
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">buffet.buffet.</span>version</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.buffet.buffet_server">module buffet.buffet_server</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.buffet.buffet_server.close">
            function <span class="apidocSignatureSpan">buffet.buffet_server.</span>close
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.buffet.buffet_server.listen">
            function <span class="apidocSignatureSpan">buffet.buffet_server.</span>listen
            <span class="apidocSignatureSpan">(options, cb)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">buffet.buffet_server.</span>version</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.buffet.ecstatic">module buffet.ecstatic</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.buffet.ecstatic.middleware">
            function <span class="apidocSignatureSpan">buffet.ecstatic.</span>middleware
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.buffet.nginx">module buffet.nginx</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.buffet.nginx.close">
            function <span class="apidocSignatureSpan">buffet.nginx.</span>close
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.buffet.nginx.listen">
            function <span class="apidocSignatureSpan">buffet.nginx.</span>listen
            <span class="apidocSignatureSpan">(options, cb)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">buffet.nginx.</span>name</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">buffet.nginx.</span>version</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.buffet.node_static">module buffet.node_static</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.buffet.node_static.middleware">
            function <span class="apidocSignatureSpan">buffet.node_static.</span>middleware
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.buffet.paperboy">module buffet.paperboy</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.buffet.paperboy.middleware">
            function <span class="apidocSignatureSpan">buffet.paperboy.</span>middleware
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.buffet.send">module buffet.send</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.buffet.send.middleware">
            function <span class="apidocSignatureSpan">buffet.send.</span>middleware
            <span class="apidocSignatureSpan">(options, cb)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.buffet.st">module buffet.st</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.buffet.st.middleware">
            function <span class="apidocSignatureSpan">buffet.st.</span>middleware
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.buffet.varnish">module buffet.varnish</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.buffet.varnish.close">
            function <span class="apidocSignatureSpan">buffet.varnish.</span>close
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.buffet.varnish.listen">
            function <span class="apidocSignatureSpan">buffet.varnish.</span>listen
            <span class="apidocSignatureSpan">(options, cb)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">buffet.varnish.</span>name</span>

        </li>

    </ol></li>

</ol></div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.buffet" id="apidoc.module.buffet">module buffet</a></h1>


    <h2>
        <a href="#apidoc.element.buffet.Buffet" id="apidoc.element.buffet.Buffet">
        function <span class="apidocSignatureSpan">buffet.</span>Buffet
        <span class="apidocSignatureSpan">(specs, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Buffet(specs, options) {
  if (toString.call(specs) === &#x27;[object Object]&#x27;) {
    options = specs;
    specs = null;
  }
  if (!specs) specs = &#x27;public/**/*&#x27;;
  Mayonnaise.call(this, specs, options);
  this.on(&#x27;all&#x27;, function (op, file) {
    switch (op) {
      case &#x27;add&#x27;: case &#x27;update&#x27;: case &#x27;cleanup&#x27;:
        dish.clearCache(file.fullPath);
        break;
    }
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.buffet.Buffet.super_" id="apidoc.element.buffet.Buffet.super_">
        function <span class="apidocSignatureSpan">buffet.</span>Buffet.super_
        <span class="apidocSignatureSpan">(specs, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Mayonnaise(specs, options) {
  if (specs &#x26;&#x26; toString.call(specs) === &#x27;[object Object]&#x27;) {
    options = specs;
    specs = &#x27;.&#x27;;
  }
  options || (options = {});
  this.options = options;
  EventEmitter.call(this);
  this.setMaxListeners(0);
  var self = this;
  this.pluginLookup = {};
  this.ready = false;

  // magic
  if (!Array.isArray(specs)) specs = [specs];

  var latch = specs.length;
  this.dollops = specs.map(function (spec, idx) {
    var opts = {cwd: spec.cwd};
    Object.keys(options).forEach(function (k) {
      if (k !== &#x27;cwd&#x27;) opts[k] = options[k];
    });
    return dollop(spec.globs || spec, opts)
      .on(&#x27;all&#x27;, function (op, file) {
        switch (op) {
          case &#x27;add&#x27;:
            if (file.stat.isFile()) {
              file.pluginPath = self.makePluginPath(file);
              if (typeof self.pluginLookup[file.pluginPath] === &#x27;undefined&#x27;) {
                self.pluginLookup[file.pluginPath] = [];
              }
              if (!~self.pluginLookup[file.pluginPath].indexOf(file)) {
                self.pluginLookup[file.pluginPath].push(file);
              }
            }
            file.weight = idx;
          case &#x27;update&#x27;:
            file.plugin = self.compile(file);
            break;
          case &#x27;remove&#x27;:
            break;
          case &#x27;reset&#x27;:
            // @todo: how to handle this
            //self.ready = false;
            //self.latch++;
            return;
          case &#x27;ready&#x27;:
            if (!self.ready &#x26;&#x26; !--latch) {
              self.ready = true;
              self.emit(&#x27;ready&#x27;, self.files());
            }
            return;
          default: return;
        }
        self.emit(op, file);
        self.emit(&#x27;all&#x27;, op, file);
      })
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>
























</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.buffet.Buffet" id="apidoc.module.buffet.Buffet">module buffet.Buffet</a></h1>


    <h2>
        <a href="#apidoc.element.buffet.Buffet.Buffet" id="apidoc.element.buffet.Buffet.Buffet">
        function <span class="apidocSignatureSpan">buffet.</span>Buffet
        <span class="apidocSignatureSpan">(specs, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Buffet(specs, options) {
  if (toString.call(specs) === &#x27;[object Object]&#x27;) {
    options = specs;
    specs = null;
  }
  if (!specs) specs = &#x27;public/**/*&#x27;;
  Mayonnaise.call(this, specs, options);
  this.on(&#x27;all&#x27;, function (op, file) {
    switch (op) {
      case &#x27;add&#x27;: case &#x27;update&#x27;: case &#x27;cleanup&#x27;:
        dish.clearCache(file.fullPath);
        break;
    }
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.buffet.Buffet.super_" id="apidoc.element.buffet.Buffet.super_">
        function <span class="apidocSignatureSpan">buffet.Buffet.</span>super_
        <span class="apidocSignatureSpan">(specs, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Mayonnaise(specs, options) {
  if (specs &#x26;&#x26; toString.call(specs) === &#x27;[object Object]&#x27;) {
    options = specs;
    specs = &#x27;.&#x27;;
  }
  options || (options = {});
  this.options = options;
  EventEmitter.call(this);
  this.setMaxListeners(0);
  var self = this;
  this.pluginLookup = {};
  this.ready = false;

  // magic
  if (!Array.isArray(specs)) specs = [specs];

  var latch = specs.length;
  this.dollops = specs.map(function (spec, idx) {
    var opts = {cwd: spec.cwd};
    Object.keys(options).forEach(function (k) {
      if (k !== &#x27;cwd&#x27;) opts[k] = options[k];
    });
    return dollop(spec.globs || spec, opts)
      .on(&#x27;all&#x27;, function (op, file) {
        switch (op) {
          case &#x27;add&#x27;:
            if (file.stat.isFile()) {
              file.pluginPath = self.makePluginPath(file);
              if (typeof self.pluginLookup[file.pluginPath] === &#x27;undefined&#x27;) {
                self.pluginLookup[file.pluginPath] = [];
              }
              if (!~self.pluginLookup[file.pluginPath].indexOf(file)) {
                self.pluginLookup[file.pluginPath].push(file);
              }
            }
            file.weight = idx;
          case &#x27;update&#x27;:
            file.plugin = self.compile(file);
            break;
          case &#x27;remove&#x27;:
            break;
          case &#x27;reset&#x27;:
            // @todo: how to handle this
            //self.ready = false;
            //self.latch++;
            return;
          case &#x27;ready&#x27;:
            if (!self.ready &#x26;&#x26; !--latch) {
              self.ready = true;
              self.emit(&#x27;ready&#x27;, self.files());
            }
            return;
          default: return;
        }
        self.emit(op, file);
        self.emit(&#x27;all&#x27;, op, file);
      })
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.buffet.Buffet.prototype" id="apidoc.module.buffet.Buffet.prototype">module buffet.Buffet.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.buffet.Buffet.prototype.middleware" id="apidoc.element.buffet.Buffet.prototype.middleware">
        function <span class="apidocSignatureSpan">buffet.Buffet.prototype.</span>middleware
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">middleware = function (options) {
  var self = this;
  options || (options = {});
  options.defaultContentType = options.defaultContentType || &#x27;application/octet-stream&#x27;;
  if (typeof options.maxAge === &#x27;undefined&#x27;) options.maxAge = 300;
  options.index || (options.index = &#x27;index.html&#x27;);
  options.notFoundPath || (options.notFoundPath = &#x27;/404.html&#x27;);
  if (options.notFoundPath[0] !== &#x27;/&#x27;) {
    options.notFoundPath = &#x27;/&#x27; + options.notFoundPath;
  }

  var mw = function (req, res, next) {
    if (!next) next = function () {
      mw.notFound(req, res);
    };
    if (req.method.match(/^get|head$/i)) {
      // check for static file
      if (self.ready) checkCache();
      else {
        self.once(&#x27;ready&#x27;, checkCache);
      }
    }
    else next();

    function checkCache () {
      var urlPath = parsedUrls[req.url];
      if (!urlPath) {
        urlPath = parseUrl(req.url).pathname;
        // Decode and strip nullbytes for security
        try {
          urlPath = decodeURIComponent(urlPath).replace(/\0/g, &#x27;&#x27;);
        }
        catch (err) {
          return next();
        }
        parsedUrls[req.url] = urlPath;
      }
      var file = self.get(urlPath);
      if (file &#x26;&#x26; file.stat.isFile()) return dish.file(file.fullPath, options)(req, res, next);
      if (options.index) {
        if (urlPath !== &#x27;/&#x27;) urlPath += &#x27;/&#x27;;
        urlPath += options.index;
        file = self.get(urlPath);
        if (file) return dish.file(file.fullPath, options)(req, res, next);
      }
      next();
    }
  };
  mw.notFound = function (req, res, next) {
    if (req.method !== &#x27;GET&#x27; &#x26;&#x26; req.method !== &#x27;HEAD&#x27;) {
      res.writeHead(405, {&#x27;Content-Type&#x27;: &#x27;text/plain; charset=utf-8&#x27;});
      res.end(&#x27;Method not allowed\n&#x27;);
    }
    else {
      if (options.notFoundPath) {
        var cached = self.get(options.notFoundPath);
        if (cached) dish.file(cached.fullPath, {status: 404})(req, res, next);
        else default404();
      }
      else default404();

      function default404 () {
        res.writeHead(404, {&#x27;Content-Type&#x27;: &#x27;text/plain; charset=utf-8&#x27;});
        res.end(&#x27;Page not found\n&#x27;);
        return;
      }
    }
  };
  return mw;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  if (!root) {
    try {
      var stat = fs.statSync(&#x27;public&#x27;);
      root = path.resolve(&#x27;public&#x27;);
    }
    catch (e) {}
  }
  return new Buffet([{globs: &#x27;**/*&#x27;, cwd: root}], options).<span class="apidocCodeKeywordSpan">middleware</span>(options
);
};

module.exports.Buffet = Buffet;
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.buffet.Buffet.super_" id="apidoc.module.buffet.Buffet.super_">module buffet.Buffet.super_</a></h1>


    <h2>
        <a href="#apidoc.element.buffet.Buffet.super_.super_" id="apidoc.element.buffet.Buffet.super_.super_">
        function <span class="apidocSignatureSpan">buffet.Buffet.</span>super_
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function EventEmitter() {
  EventEmitter.init.call(this);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.buffet.Buffet.super_.prototype" id="apidoc.module.buffet.Buffet.super_.prototype">module buffet.Buffet.super_.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.buffet.Buffet.super_.prototype.close" id="apidoc.element.buffet.Buffet.super_.prototype.close">
        function <span class="apidocSignatureSpan">buffet.Buffet.super_.prototype.</span>close
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">close = function () {
  this.dollops.forEach(function (d) {
    d.close();
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.buffet.Buffet.super_.prototype.compile" id="apidoc.element.buffet.Buffet.super_.prototype.compile">
        function <span class="apidocSignatureSpan">buffet.Buffet.super_.prototype.</span>compile
        <span class="apidocSignatureSpan">(file)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">compile = function (file) {
  // override this method
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.buffet.Buffet.super_.prototype.files" id="apidoc.element.buffet.Buffet.super_.prototype.files">
        function <span class="apidocSignatureSpan">buffet.Buffet.super_.prototype.</span>files
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">files = function () {
  return this.dollops.reduce(function (prev, d) {
    return prev.concat(d.files());
  }, []);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.buffet.Buffet.super_.prototype.get" id="apidoc.element.buffet.Buffet.super_.prototype.get">
        function <span class="apidocSignatureSpan">buffet.Buffet.super_.prototype.</span>get
        <span class="apidocSignatureSpan">(key, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">get = function (key, options) {
  options || (options = {});
  var self = this;
  var files = this.dollops.reduce(function (prev, d) {
    var file = d.get(key);
    if (file) prev.push(file);
    return prev;
  }, []);
  if (options.priority === &#x27;first&#x27;) files.reverse();
  if (options.merge) {
    var ret;
    files.forEach(function (file) {
      if (ret) ret = options.merge(ret, file);
      else ret = file;
    });
    return ret;
  }
  else return options.merge === &#x27;first&#x27; ? files[0] : files[files.length - 1];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    urlPath = decodeURIComponent(urlPath).replace(/\0/g, &#x27;&#x27;);
  }
  catch (err) {
    return next();
  }
  parsedUrls[req.url] = urlPath;
}
var file = self.<span class="apidocCodeKeywordSpan">get</span>(urlPath);
if (file &#x26;&#x26; file.stat.isFile()) return dish.file(file.fullPath, options)(req, res, next);
if (options.index) {
  if (urlPath !== &#x27;/&#x27;) urlPath += &#x27;/&#x27;;
  urlPath += options.index;
  file = self.get(urlPath);
  if (file) return dish.file(file.fullPath, options)(req, res, next);
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.buffet.Buffet.super_.prototype.getPlugin" id="apidoc.element.buffet.Buffet.super_.prototype.getPlugin">
        function <span class="apidocSignatureSpan">buffet.Buffet.super_.prototype.</span>getPlugin
        <span class="apidocSignatureSpan">(p, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getPlugin = function (p, options) {
  options || (options = {});
  var self = this, ret;
  var files = this.pluginLookup[p] || [];
  files = files.slice();
  if (options.priority === &#x27;first&#x27;) files.reverse();
  files.forEach(function (file) {
    if (options.merge) {
      var compiled = self.compile(file);
      if (typeof ret === &#x27;undefined&#x27;) ret = compiled;
      else ret = options.merge(ret, compiled);
    }
    else {
      if (!file.plugin) file.plugin = self.compile(file);
      ret = file;
    }
  });
  return ret;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.buffet.Buffet.super_.prototype.makePluginPath" id="apidoc.element.buffet.Buffet.super_.prototype.makePluginPath">
        function <span class="apidocSignatureSpan">buffet.Buffet.super_.prototype.</span>makePluginPath
        <span class="apidocSignatureSpan">(file)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">makePluginPath = function (file) {
  return file.key.replace(/\.[^\.]+$/, &#x27;&#x27;);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.buffet.buffet" id="apidoc.module.buffet.buffet">module buffet.buffet</a></h1>


    <h2>
        <a href="#apidoc.element.buffet.buffet.middleware" id="apidoc.element.buffet.buffet.middleware">
        function <span class="apidocSignatureSpan">buffet.buffet.</span>middleware
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">middleware = function (options) {
  return require(&#x27;../&#x27;)(options.root);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  if (!root) {
    try {
      var stat = fs.statSync(&#x27;public&#x27;);
      root = path.resolve(&#x27;public&#x27;);
    }
    catch (e) {}
  }
  return new Buffet([{globs: &#x27;**/*&#x27;, cwd: root}], options).<span class="apidocCodeKeywordSpan">middleware</span>(options
);
};

module.exports.Buffet = Buffet;
...</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.buffet.buffet_server" id="apidoc.module.buffet.buffet_server">module buffet.buffet_server</a></h1>


    <h2>
        <a href="#apidoc.element.buffet.buffet_server.close" id="apidoc.element.buffet.buffet_server.close">
        function <span class="apidocSignatureSpan">buffet.buffet_server.</span>close
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">close = function () {
  buffet.kill();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.buffet.buffet_server.listen" id="apidoc.element.buffet.buffet_server.listen">
        function <span class="apidocSignatureSpan">buffet.buffet_server.</span>listen
        <span class="apidocSignatureSpan">(options, cb)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">listen = function (options, cb) {
  var port = randomPort()

  buffet = execFile(buffetRoot + &#x27;/bin/buffet.js&#x27;, [&#x27;-p&#x27;, port, &#x27;--no-log&#x27;, &#x27;--no-watch&#x27;], {cwd: options.root});
  buffet.stderr.on(&#x27;data&#x27;, function (chunk) {
    if (chunk.toString().match(/listening/)) {
      cb(null, port);
    }
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  , buffet = require(&#x27;buffet&#x27;)({root: &#x27;./public&#x27;}) // root defaults to ./public

app.use(buffet);
// (non-static routes here)
app.use(buffet.notFound);

var server = require(&#x27;http&#x27;).createServer(app);
server.<span class="apidocCodeKeywordSpan">listen</span>(3000, function () {
  console.log(&#x27;test server running on port 3000&#x27;);
});
```

### Easy built-in server

```bash
...</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.buffet.ecstatic" id="apidoc.module.buffet.ecstatic">module buffet.ecstatic</a></h1>


    <h2>
        <a href="#apidoc.element.buffet.ecstatic.middleware" id="apidoc.element.buffet.ecstatic.middleware">
        function <span class="apidocSignatureSpan">buffet.ecstatic.</span>middleware
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">middleware = function (options) {
  return require(&#x27;ecstatic&#x27;)(options.root, { cache: 7200 });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  if (!root) {
    try {
      var stat = fs.statSync(&#x27;public&#x27;);
      root = path.resolve(&#x27;public&#x27;);
    }
    catch (e) {}
  }
  return new Buffet([{globs: &#x27;**/*&#x27;, cwd: root}], options).<span class="apidocCodeKeywordSpan">middleware</span>(options
);
};

module.exports.Buffet = Buffet;
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.buffet.nginx" id="apidoc.module.buffet.nginx">module buffet.nginx</a></h1>


    <h2>
        <a href="#apidoc.element.buffet.nginx.close" id="apidoc.element.buffet.nginx.close">
        function <span class="apidocSignatureSpan">buffet.nginx.</span>close
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">close = function () {
  exec(&#x27;nginx&#x27;, [&#x27;-s&#x27;, &#x27;quit&#x27;]);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.buffet.nginx.listen" id="apidoc.element.buffet.nginx.listen">
        function <span class="apidocSignatureSpan">buffet.nginx.</span>listen
        <span class="apidocSignatureSpan">(options, cb)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">listen = function (options, cb) {
  exec(&#x27;nginx&#x27;, [&#x27;-c&#x27;, join(__dirname, &#x27;nginx&#x27;, &#x27;nginx.conf&#x27;)]);
  setTimeout(function () {
    cb(null, 8080);
  }, 500);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  , buffet = require(&#x27;buffet&#x27;)({root: &#x27;./public&#x27;}) // root defaults to ./public

app.use(buffet);
// (non-static routes here)
app.use(buffet.notFound);

var server = require(&#x27;http&#x27;).createServer(app);
server.<span class="apidocCodeKeywordSpan">listen</span>(3000, function () {
  console.log(&#x27;test server running on port 3000&#x27;);
});
```

### Easy built-in server

```bash
...</pre></li>
    </ul>






</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.buffet.node_static" id="apidoc.module.buffet.node_static">module buffet.node_static</a></h1>


    <h2>
        <a href="#apidoc.element.buffet.node_static.middleware" id="apidoc.element.buffet.node_static.middleware">
        function <span class="apidocSignatureSpan">buffet.node_static.</span>middleware
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">middleware = function (options) {
  var nodeStatic = require(&#x27;node-static&#x27;)
    , fileServer = new(nodeStatic.Server)(options.root, { cache: 7200 })

  return fileServer.serve.bind(fileServer);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  if (!root) {
    try {
      var stat = fs.statSync(&#x27;public&#x27;);
      root = path.resolve(&#x27;public&#x27;);
    }
    catch (e) {}
  }
  return new Buffet([{globs: &#x27;**/*&#x27;, cwd: root}], options).<span class="apidocCodeKeywordSpan">middleware</span>(options
);
};

module.exports.Buffet = Buffet;
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.buffet.paperboy" id="apidoc.module.buffet.paperboy">module buffet.paperboy</a></h1>


    <h2>
        <a href="#apidoc.element.buffet.paperboy.middleware" id="apidoc.element.buffet.paperboy.middleware">
        function <span class="apidocSignatureSpan">buffet.paperboy.</span>middleware
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">middleware = function (options) {
  var paperboy = require(&#x27;paperboy&#x27;);
  return function (req, res, next) {
    paperboy.deliver(options.root, req, res);
  };
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  if (!root) {
    try {
      var stat = fs.statSync(&#x27;public&#x27;);
      root = path.resolve(&#x27;public&#x27;);
    }
    catch (e) {}
  }
  return new Buffet([{globs: &#x27;**/*&#x27;, cwd: root}], options).<span class="apidocCodeKeywordSpan">middleware</span>(options
);
};

module.exports.Buffet = Buffet;
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.buffet.send" id="apidoc.module.buffet.send">module buffet.send</a></h1>


    <h2>
        <a href="#apidoc.element.buffet.send.middleware" id="apidoc.element.buffet.send.middleware">
        function <span class="apidocSignatureSpan">buffet.send.</span>middleware
        <span class="apidocSignatureSpan">(options, cb)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">middleware = function (options, cb) {
  var send = require(&#x27;send&#x27;);
  return function (req, res, next) {
    send(req, req.url)
      .root(options.root)
      .pipe(res);
  };
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  if (!root) {
    try {
      var stat = fs.statSync(&#x27;public&#x27;);
      root = path.resolve(&#x27;public&#x27;);
    }
    catch (e) {}
  }
  return new Buffet([{globs: &#x27;**/*&#x27;, cwd: root}], options).<span class="apidocCodeKeywordSpan">middleware</span>(options
);
};

module.exports.Buffet = Buffet;
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.buffet.st" id="apidoc.module.buffet.st">module buffet.st</a></h1>


    <h2>
        <a href="#apidoc.element.buffet.st.middleware" id="apidoc.element.buffet.st.middleware">
        function <span class="apidocSignatureSpan">buffet.st.</span>middleware
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">middleware = function (options) {
  return require(&#x27;st&#x27;)({
    path: options.root,
    url: &#x27;/&#x27;,

    cache: {
      fd: {
        max: 1000, // number of fd&#x27;s to hang on to
        maxAge: 1000*60*60, // amount of ms before fd&#x27;s expire
      },

      stat: {
        max: 5000, // number of stat objects to hang on to
        maxAge: 1000 * 60, // number of ms that stats are good for
      },

      content: {
        max: 1024*1024*64, // how much memory to use on caching contents
        maxAge: 1000 * 60 * 10, // how long to cache contents for
      }
    }
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  if (!root) {
    try {
      var stat = fs.statSync(&#x27;public&#x27;);
      root = path.resolve(&#x27;public&#x27;);
    }
    catch (e) {}
  }
  return new Buffet([{globs: &#x27;**/*&#x27;, cwd: root}], options).<span class="apidocCodeKeywordSpan">middleware</span>(options
);
};

module.exports.Buffet = Buffet;
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.buffet.varnish" id="apidoc.module.buffet.varnish">module buffet.varnish</a></h1>


    <h2>
        <a href="#apidoc.element.buffet.varnish.close" id="apidoc.element.buffet.varnish.close">
        function <span class="apidocSignatureSpan">buffet.varnish.</span>close
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">close = function () {
  varnish.kill();
  buffet.kill();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.buffet.varnish.listen" id="apidoc.element.buffet.varnish.listen">
        function <span class="apidocSignatureSpan">buffet.varnish.</span>listen
        <span class="apidocSignatureSpan">(options, cb)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">listen = function (options, cb) {
  var buffetPort = randomPort()
    , buffetRoot = require(&#x27;path&#x27;).resolve(__dirname, &#x27;..&#x27;)
    , port = randomPort()

  buffet = execFile(buffetRoot + &#x27;/bin/buffet.js&#x27;, [&#x27;-p&#x27;, buffetPort], {cwd: options.root});

  varnish = spawn(&#x27;varnishd&#x27;, [&#x27;-F&#x27;, &#x27;-n&#x27;, require(&#x27;idgen&#x27;)(), &#x27;-s&#x27;, &#x27;malloc&#x27;, &#x27;-b&#x27;, &#x27;127.0.0.1:&#x27; + buffetPort, &#x27;-a&#x27;, &#x27;127.0.0.1
:&#x27; + port]);
  varnish.stderr.on(&#x27;data&#x27;, function (chunk) {
    if (chunk.toString().match(/Child starts/)) {
      cb(null, port);
    }
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  , buffet = require(&#x27;buffet&#x27;)({root: &#x27;./public&#x27;}) // root defaults to ./public

app.use(buffet);
// (non-static routes here)
app.use(buffet.notFound);

var server = require(&#x27;http&#x27;).createServer(app);
server.<span class="apidocCodeKeywordSpan">listen</span>(3000, function () {
  console.log(&#x27;test server running on port 3000&#x27;);
});
```

### Easy built-in server

```bash
...</pre></li>
    </ul>




</div>

<div class="apidocFooterDiv">
    [ this document was created with
    <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a>
    ]
</div>
</div>
